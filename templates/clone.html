{% extends 'base.html' %}

{% block title %}克隆音色 - 发音学习平台{% endblock %}

{% block content %}
<div class="tts-container">
    <h1>克隆新音色</h1>
    
    <div class="nav-tabs">
        <a href="{{ url_for('index') }}" class="nav-tab">
            <svg class="icon"><use xlink:href="#icon-home"></use></svg> 返回首页
        </a>
        <a href="{{ url_for('dashboard') }}" class="nav-tab">
            <svg class="icon"><use xlink:href="#icon-user"></use></svg> 用户中心
        </a>
        <a href="{{ url_for('voices') }}" class="nav-tab active">
            <svg class="icon"><use xlink:href="#icon-list"></use></svg> 我的音色
        </a>
    </div>
    
    <div class="main-content">
        <form id="clone-form">
            <div class="input-group">
                <label for="voice-name">音色名称：</label>
                <input type="text" id="voice-name" placeholder="为新音色起个名字..." required>
            </div>
            
            <div class="input-group">
                <label for="voice-description">音色备注（可选）：</label>
                <textarea id="voice-description" rows="2" placeholder="添加备注信息，如音色特点、适用场景等..."></textarea>
            </div>
            
            <div class="input-group">
                <label for="reference-text">参考文本：</label>
                <textarea id="reference-text" rows="3" placeholder="输入参考音频中说的文字..." required></textarea>
            </div>
            
            <div class="input-group">
                <label>选择参考音频：</label>
                <div class="audio-input-options">
                    <div class="upload-option">
                        <label for="audio-file" class="file-label">上传音频文件</label>
                        <input type="file" id="audio-file" accept="audio/mp3,audio/wav" class="file-input">
                        <span id="file-name">未选择文件</span>
                    </div>
                    
                    <div class="record-option">
                        <!-- 开始录音按钮，默认显示 -->
                        <button type="button" id="record-btn" class="record-btn">
                            <svg class="icon"><use xlink:href="#icon-mic"></use></svg> 开始录音
                        </button>
                        
                        <!-- 录音状态和停止按钮，默认隐藏 -->
                        <div id="recording-status" class="recording-status" style="display: none;">
                            <span id="recording-time">00:00</span>
                            <button type="button" id="stop-btn" class="stop-btn">
                                <svg class="icon"><use xlink:href="#icon-pause"></use></svg> 停止录音
                            </button>
                        </div>
                    </div>
                </div>
                
                <div id="audio-preview" class="hidden">
                    <h4>预览音频：</h4>
                    <audio id="preview-player" controls></audio>
                </div>
            </div>
            
            <button type="submit" id="clone-btn">创建音色</button>
        </form>
        
        <div id="clone-status" class="status-message"></div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tts.css') }}">
<script src="{{ url_for('static', filename='js/recorder.js') }}"></script>
<script src="{{ url_for('static', filename='js/clone.js') }}"></script>
{% endblock %} 